def make_ext(modname, pyxfilename):
    from distutils.extension import Extension
    from distutils import sysconfig
    import os
    opts = []
    if ('CC' in os.environ and 'icc' in os.environ['CC']) or \
        'icc' in sysconfig.get_config_var('CC'):
            opts += ['-lirc', '-lintlc']
    return Extension(
        name = modname,
        sources = [pyxfilename],
        extra_link_args = opts,
    )
